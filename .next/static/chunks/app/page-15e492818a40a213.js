(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2507:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l});var r=n(5155),a=n(2115),s=n(792);function o(){let[e,t]=(0,a.useState)(""),[n,o]=(0,a.useState)([{role:"assistant",content:"Hi! How can I assist you on your freediving journey today? Let me know your certification level, PBs, warm-up routine, and training frequency so I can help you best."}]),[l,d]=(0,a.useState)(""),[c,x]=(0,a.useState)(!1),u=(0,a.useRef)(null);if((0,a.useEffect)(()=>{let e=localStorage.getItem("kovalUser");e&&t(e);let n=localStorage.getItem("kovalChatHistory");n&&o(JSON.parse(n))},[]),(0,a.useEffect)(()=>{var e;null==(e=u.current)||e.scrollIntoView({behavior:"smooth"}),localStorage.setItem("kovalChatHistory",JSON.stringify(n))},[n]),!e)return(0,r.jsxs)("div",{style:{padding:"20px",fontFamily:"Arial"},children:[(0,r.jsx)("h2",{children:"Welcome to Koval Deep AI"}),(0,r.jsx)("p",{children:"Please enter your name or email to begin:"}),(0,r.jsx)("input",{style:{padding:"10px",width:"300px",fontSize:"16px"},placeholder:"Your name or email",onKeyDown:e=>{"Enter"===e.key&&e.target.value.trim()&&(localStorage.setItem("kovalUser",e.target.value.trim()),t(e.target.value.trim()))}})]});let p=async()=>{if(!l.trim())return;let e=[...n,{role:"user",content:l}];o(e),d(""),x(!0);try{var t;let n=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:e})}),r=await n.json(),a=null!=(t=null==r?void 0:r.assistantMessage)?t:{role:"assistant",content:"Hmm, something went wrong. Try again."};o([...e,a])}catch(t){console.error("API call failed:",t),o([...e,{role:"assistant",content:"Sorry, an error occurred."}])}finally{x(!1)}};return(0,r.jsxs)("div",{style:i.container,children:[(0,r.jsxs)("div",{style:i.chatBox,children:[n.map((e,t)=>(0,r.jsxs)("div",{style:"user"===e.role?i.userMsg:i.assistantMsg,children:[(0,r.jsxs)("strong",{children:[e.role,":"]}),(0,r.jsx)(s.oz,{children:e.content})]},t)),c&&(0,r.jsxs)("div",{style:i.assistantMsg,children:[(0,r.jsx)("strong",{children:"assistant:"})," ",(0,r.jsx)("em",{children:"Typing..."})]}),(0,r.jsx)("div",{ref:u})]}),(0,r.jsxs)("div",{style:i.inputContainer,children:[(0,r.jsx)("textarea",{value:l,onChange:e=>d(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),p())},placeholder:"Ask something...",style:i.textArea}),(0,r.jsx)("button",{onClick:p,style:i.sendButton,children:"Send"})]})]})}let i={container:{fontFamily:"Arial, sans-serif",padding:"20px",maxWidth:"700px",margin:"0 auto"},chatBox:{border:"1px solid #ccc",borderRadius:"8px",padding:"15px",height:"500px",overflowY:"scroll",backgroundColor:"#f9f9f9",marginBottom:"10px"},userMsg:{textAlign:"right",margin:"10px 0",backgroundColor:"#d9f2ff",padding:"8px 12px",borderRadius:"10px",display:"inline-block",maxWidth:"80%"},assistantMsg:{textAlign:"left",margin:"10px 0",backgroundColor:"#eaeaea",padding:"8px 12px",borderRadius:"10px",display:"inline-block",maxWidth:"80%"},inputContainer:{display:"flex",gap:"10px"},textArea:{flexGrow:1,padding:"10px",fontSize:"16px",borderRadius:"8px",border:"1px solid #ccc",resize:"none",height:"60px"},sendButton:{padding:"10px 20px",fontSize:"16px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"8px",cursor:"pointer"}};function l(){let[e,t]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{t(!1)},[]),e)?(0,r.jsx)("div",{children:"Loading..."}):(0,r.jsx)("div",{className:"min-h-screen bg-cover bg-center bg-black text-white p-6",style:{backgroundImage:"url('/background.jpg')"},children:(0,r.jsxs)("div",{className:"max-w-2xl mx-auto bg-black bg-opacity-70 rounded-xl p-6 shadow-lg",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-center mb-6",children:"Koval Deep AI"}),(0,r.jsx)(o,{})]})})}},9278:(e,t,n)=>{Promise.resolve().then(n.bind(n,2507))}},e=>{var t=t=>e(e.s=t);e.O(0,[411,441,684,358],()=>t(9278)),_N_E=e.O()}]);