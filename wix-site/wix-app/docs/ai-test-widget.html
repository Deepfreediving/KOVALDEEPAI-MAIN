<!-- 
🧪 SIMPLE AI TEST WIDGET
Add this to a Wix page to test AI functionality directly
-->

<script>
// Simple test function to verify AI is working
async function testAI() {
  console.log("🧪 Testing AI functionality...");
  
  try {
    // Send a test message
    const testMessage = "Hello, can you help me with freediving?";
    const userId = "test-user-" + Date.now();
    
    console.log("📤 Sending test message:", testMessage);
    
    // This should use the sendChatMessage function from your frontend
    const response = await sendChatMessage(testMessage, userId);
    
    console.log("📥 AI Response received:", response);
    
    if (response && response.message) {
      console.log("✅ AI is working correctly!");
      return true;
    } else {
      console.log("⚠️ AI response format unexpected");
      return false;
    }
    
  } catch (error) {
    console.error("❌ AI test failed:", error);
    return false;
  }
}

// Auto-test AI when page loads
setTimeout(() => {
  if (typeof sendChatMessage === 'function') {
    testAI();
  } else {
    console.log("⏳ Waiting for AI functions to load...");
    
    // Retry after 3 seconds
    setTimeout(() => {
      if (typeof sendChatMessage === 'function') {
        testAI();
      } else {
        console.log("❌ AI functions not found - check frontend initialization");
      }
    }, 3000);
  }
}, 2000);

console.log("🧪 AI Test Widget loaded - will auto-test AI functionality");
</script>

<style>
/* Minimal styling for test widget */
.ai-test-widget {
  padding: 10px;
  background: #f0f0f0;
  border: 1px solid #ccc;
  border-radius: 5px;
  margin: 10px 0;
  font-family: Arial, sans-serif;
}

.ai-test-button {
  background: #007cba;
  color: white;
  border: none;
  padding: 8px 16px;
  border-radius: 4px;
  cursor: pointer;
}

.ai-test-button:hover {
  background: #005a8b;
}
</style>

<div class="ai-test-widget">
  <h3>🤖 AI Test Widget</h3>
  <p>This widget tests AI functionality independently of Wix backend.</p>
  <button class="ai-test-button" onclick="testAI()">Test AI Now</button>
  <p><small>Check console for results</small></p>
</div>
